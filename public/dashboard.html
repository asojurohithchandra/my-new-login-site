<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project R ‚Äì Dashboard</title>

  <style>
    :root {
      --bg-main: #f4f5fb;
      --accent-soft: #fef9c3;
      --accent: #a3e635;
      --accent-strong: #84cc16;
      --text-main: #111827;
      --text-muted: #6b7280;
      --nav-bg: #111827;
      --nav-active: #e5ff7a;
      --border-subtle: #e5e7eb;
      --card-radius: 16px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
    }

    .app {
      display: grid;
      grid-template-columns: 230px minmax(0, 1.6fr) minmax(260px, 0.9fr);
      min-height: 100vh;
    }

    @media (max-width: 960px) {
      .app {
        grid-template-columns: 70px minmax(0, 1fr);
        grid-template-rows: auto auto;
      }
      .right-panel {
        display: none;
      }
    }

    @media (max-width: 720px) {
      .app {
        grid-template-columns: 1fr;
      }
      .sidebar {
        display: none;
      }
    }

    /* Sidebar */

    .sidebar {
      background: var(--nav-bg);
      color: #e5e7eb;
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .logo {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #f9fafb;
      padding: 6px 4px;
    }

    .nav {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 14px;
      cursor: pointer;
      color: #e5e7eb;
      border: none;
      background: transparent;
      text-align: left;
    }

    .nav-item span.icon {
      width: 20px;
      text-align: center;
      font-size: 14px;
    }

    .nav-item.active {
      background: #facc15;
      color: #111827;
      font-weight: 600;
    }

    .nav-item:hover:not(.active) {
      background: rgba(249, 250, 251, 0.07);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: #9ca3af;
      padding: 0 4px;
    }

    /* Main */

    .main {
      padding: 16px 18px 20px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      background: linear-gradient(135deg, #fefce8 0%, #f4f5fb 40%, #eef2ff 100%);
      border-right: 1px solid var(--border-subtle);
    }

    .top-bar {
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
    }

    .top-bar-row {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .top-logo-mobile {
      display: none;
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: #4b5563;
    }

    @media (max-width: 720px) {
      .top-logo-mobile {
        display: block;
      }
    }

    .search-wrapper {
      flex: 1;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 9px 38px 9px 14px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: rgba(249, 250, 251, 0.9);
      font-size: 14px;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .search-input:focus {
      border-color: #4f46e5;
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.1);
    }

    .search-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 15px;
      color: #9ca3af;
    }

    .search-status {
      font-size: 12px;
      color: var(--text-muted);
      padding-left: 4px;
    }

    .search-status.valid {
      color: #15803d;
    }

    .search-status.new {
      color: #a16207;
    }

    .suggestions {
      position: absolute;
      top: 38px;
      left: 0;
      right: 0;
      margin-top: 4px;
      background: #ffffff;
      border-radius: 12px;
      border: 1px solid rgba(209, 213, 219, 0.7);
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.18);
      max-height: 260px;
      overflow-y: auto;
      z-index: 10;
      font-size: 13px;
    }

    .suggestion-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 7px 11px;
      cursor: pointer;
    }

    .suggestion-item:not(:last-child) {
      border-bottom: 1px solid #f3f4f6;
    }

    .suggestion-item:hover {
      background: #f9fafb;
    }

    .suggestion-label {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .suggestion-tag {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #eef2ff;
      color: #4f46e5;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .suggestion-icon {
      font-size: 13px;
    }

    .suggestion-create {
      background: #fefce8;
    }

    /* Feed */

    .feed {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .feed-placeholder {
      padding: 14px 16px;
      border-radius: var(--card-radius);
      background: rgba(255, 255, 255, 0.9);
      border: 1px dashed rgba(148, 163, 184, 0.7);
      font-size: 13px;
      color: #6b7280;
    }

    /* Right panel */

    .right-panel {
      padding: 18px 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background: #f9fafb;
    }

    .profile-card {
      background: #ffffff;
      border-radius: var(--card-radius);
      padding: 14px 14px 12px;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.1);
      border: 1px solid rgba(209, 213, 219, 0.8);
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .avatar {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: #f97316;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-size: 17px;
      font-weight: 600;
    }

    .profile-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .profile-name {
      font-size: 14px;
      font-weight: 600;
    }

    .profile-email {
      font-size: 12px;
      color: #6b7280;
      word-break: break-all;
    }

    .profile-actions {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 10px;
    }

    .btn-outline,
    .btn-danger {
      width: 100%;
      padding: 7px 0;
      border-radius: 999px;
      font-size: 13px;
      cursor: pointer;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      color: #111827;
      font-weight: 500;
      transition: background 0.15s ease, color 0.15s ease, box-shadow 0.12s ease;
    }

    .btn-outline:hover {
      background: #111827;
      color: #f9fafb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.4);
    }

    .btn-danger {
      border-color: #fecaca;
      background: #fef2f2;
      color: #b91c1c;
    }

    .btn-danger:hover {
      background: #b91c1c;
      color: white;
      box-shadow: 0 8px 18px rgba(185, 28, 28, 0.45);
    }

    .right-caption {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- LEFT SIDEBAR -->
    <aside class="sidebar">
      <div class="logo">Project R</div>
      <nav class="nav">
        <button class="nav-item active">
          <span class="icon">üè†</span>
          <span>Home</span>
        </button>
        <button class="nav-item">
          <span class="icon">üî•</span>
          <span>Trendy</span>
        </button>
        <button class="nav-item">
          <span class="icon">üïí</span>
          <span>Latest</span>
        </button>
        <button class="nav-item">
          <span class="icon">üîî</span>
          <span>Notifications</span>
        </button>
        <button class="nav-item">
          <span class="icon">üíæ</span>
          <span>Saved posts</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        Project R ¬∑ Early prototype<br />
        Search a subject to get started.
      </div>
    </aside>

    <!-- MAIN COLUMN -->
    <main class="main">
      <!-- Top search for subjects -->
      <header class="top-bar">
        <div class="top-bar-row">
          <div class="top-logo-mobile">Project R</div>
          <div class="search-wrapper">
            <input
              id="searchInput"
              class="search-input"
              type="text"
              placeholder="Search subjects (e.g., USC, Stanford, UT Austin)..."
              autocomplete="off"
            />
            <span class="search-icon">üîç</span>

            <!-- suggestions dropdown -->
            <div id="suggestions" class="suggestions" style="display:none;"></div>
          </div>
        </div>
        <div id="searchStatus" class="search-status">
          Type to search known subjects. Valid subjects have a ‚úì. You can also create a new subject.
        </div>
      </header>

      <!-- Feed placeholder -->
      <section class="feed" id="feed">
        <div class="feed-placeholder" id="feedPlaceholder">
          After you pick a subject, future versions will show its reviews here (top posts, latest, pros/cons etc.).
          For now this is just a placeholder area.
        </div>
      </section>
    </main>

    <!-- RIGHT PROFILE PANEL -->
    <aside class="right-panel">
      <div class="profile-card">
        <div class="profile-header">
          <div id="avatar" class="avatar">R</div>
          <div class="profile-main">
            <div id="profileName" class="profile-name">New reviewer</div>
            <div id="profileEmail" class="profile-email">you@example.com</div>
          </div>
        </div>

        <div class="profile-actions">
          <button class="btn-outline" onclick="goToProfile()">Go to profile</button>
          <button class="btn-danger" onclick="logout()">Log out</button>
        </div>

        <div class="right-caption">
          In later versions we‚Äôll show your stats here ‚Äì subjects reviewed, upvotes and saved posts.
        </div>
      </div>
    </aside>
  </div>

  <script>
    // Top 30 universities as valid subjects
    const SUBJECTS = [
      "Harvard University",
      "Stanford University",
      "Massachusetts Institute of Technology",
      "University of California, Berkeley",
      "University of Oxford",
      "University of Cambridge",
      "California Institute of Technology",
      "Princeton University",
      "Yale University",
      "Columbia University",
      "University of Chicago",
      "University of Pennsylvania",
      "Cornell University",
      "University of California, Los Angeles",
      "University of Michigan ‚Äì Ann Arbor",
      "New York University",
      "University of Texas at Austin",
      "Carnegie Mellon University",
      "Duke University",
      "Northwestern University",
      "University of Washington",
      "University of Southern California",
      "Georgia Institute of Technology",
      "University of Illinois Urbana-Champaign",
      "University of Toronto",
      "ETH Zurich",
      "National University of Singapore",
      "University of British Columbia",
      "London School of Economics",
      "University College London"
    ];

    let currentEmail = "";
    let currentSubject = "";

    // Setup on load
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      currentEmail = params.get("email") || "";

      // Profile info
      const emailEl = document.getElementById("profileEmail");
      const nameEl = document.getElementById("profileName");
      const avatarEl = document.getElementById("avatar");

      if (currentEmail) {
        emailEl.textContent = currentEmail;
        const namePart = currentEmail.split("@")[0];
        nameEl.textContent = namePart || "Reviewer";
        const letter = (namePart || "R").charAt(0).toUpperCase();
        avatarEl.textContent = letter;
      } else {
        emailEl.textContent = "Not signed in correctly";
        nameEl.textContent = "Guest";
        avatarEl.textContent = "G";
      }

      // Search events
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", handleSearchInput);
      searchInput.addEventListener("focus", handleSearchInput);
      document.addEventListener("click", (e) => {
        const suggestions = document.getElementById("suggestions");
        const wrapper = document.querySelector(".search-wrapper");
        if (!wrapper.contains(e.target)) {
          suggestions.style.display = "none";
        }
      });
    });

    function normalize(str) {
      return str.trim().toLowerCase();
    }

    function handleSearchInput() {
      const query = document.getElementById("searchInput").value;
      const suggestionsEl = document.getElementById("suggestions");
      const statusEl = document.getElementById("searchStatus");

      const trimmed = query.trim();
      const norm = normalize(trimmed);

      // Filter valid subjects
      let matches = [];
      if (norm) {
        matches = SUBJECTS.filter((s) => normalize(s).includes(norm));
      } else {
        // when empty, show top subjects
        matches = SUBJECTS.slice(0, 6);
      }

      const exact = SUBJECTS.find((s) => normalize(s) === norm);

      // Update status line
      if (!trimmed) {
        statusEl.textContent =
          "Type to search known subjects. Valid subjects have a ‚úì. You can also create a new subject.";
        statusEl.className = "search-status";
      } else if (exact) {
        statusEl.textContent = `Valid subject ‚úì "${exact}"`;
        statusEl.className = "search-status valid";
      } else {
        statusEl.textContent = `New subject ‚Äì not in list yet. You can create it.`;
        statusEl.className = "search-status new";
      }

      // Build suggestions dropdown
      suggestionsEl.innerHTML = "";

      if (matches.length === 0 && !trimmed) {
        suggestionsEl.style.display = "none";
        return;
      }

      matches.forEach((subj) => {
        const item = document.createElement("div");
        item.className = "suggestion-item";
        item.onclick = () => selectSubject(subj, true);

        const label = document.createElement("div");
        label.className = "suggestion-label";
        const nameSpan = document.createElement("span");
        nameSpan.textContent = subj;
        const tag = document.createElement("span");
        tag.className = "suggestion-tag";
        tag.textContent = "valid";
        label.appendChild(nameSpan);
        label.appendChild(tag);

        const icon = document.createElement("span");
        icon.className = "suggestion-icon";
        icon.textContent = "‚úì";

        item.appendChild(label);
        item.appendChild(icon);
        suggestionsEl.appendChild(item);
      });

      // Create-subject row
      if (trimmed && !exact) {
        const createItem = document.createElement("div");
        createItem.className = "suggestion-item suggestion-create";
        createItem.onclick = () => selectSubject(trimmed, false);

        const label = document.createElement("div");
        label.className = "suggestion-label";
        const textSpan = document.createElement("span");
        textSpan.textContent = `Create new subject: "${trimmed}"`;
        label.appendChild(textSpan);

        const icon = document.createElement("span");
        icon.className = "suggestion-icon";
        icon.textContent = "‚ûï";

        createItem.appendChild(label);
        createItem.appendChild(icon);
        suggestionsEl.appendChild(createItem);
      }

      suggestionsEl.style.display = "block";
    }

    function selectSubject(name, isValid) {
      currentSubject = name;
      const input = document.getElementById("searchInput");
      const suggestionsEl = document.getElementById("suggestions");
      const statusEl = document.getElementById("searchStatus");
      const placeholderFeed = document.getElementById("feedPlaceholder");

      input.value = name;
      suggestionsEl.style.display = "none";

      if (isValid) {
        statusEl.textContent = `Valid subject ‚úì "${name}" selected. (Later we'll load its reviews here.)`;
        statusEl.className = "search-status valid";
      } else {
        statusEl.textContent = `New subject "${name}" created locally. In future this will be saved to the database.`;
        statusEl.className = "search-status new";
      }

      placeholderFeed.textContent =
        `You selected the subject "${name}". In the full version, this area will show its reviews, ratings, and tags.`;
    }

    function goToProfile() {
      if (!currentEmail) {
        window.location.href = "profile.html";
        return;
      }
      window.location.href =
        "profile.html?email=" + encodeURIComponent(currentEmail);
    }

    function logout() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
